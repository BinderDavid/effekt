import io

def main() = eventloop(box {

  val p = promise::make[String]()

  spawn(box { println("Resolved 1: " ++ promise::await(p)) });
  spawn(box { println("Resolved 2: " ++ promise::await(p)) });
  spawn(box { println("Resolved 3: " ++ promise::await(p)) });

  promise::resolve(p, "42")

})