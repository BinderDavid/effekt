module io/time

import io

def wait(millis: Int): Unit =
  direct::wait(millis)

namespace direct {
  extern control def wait(millis: Int): Unit =
    js "$effekt.callcc(callback => setTimeout(() => callback($effekt.unit), ${millis}))"
    llvm """
      call void @c_wait_timer(%Int %millis, %Stack %stack)
      ret void
    """
}
